<html><head><title>MailMan</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script language=JavaScript src="../javascript/main.js"></script></head><body class=FramedContentPage onLoad="NDOnLoad()"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.35 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->

<div class=CClass id=MainTopic><div class=CTopic><h1 class=CTitle><a name="MailMan"></a>MailMan</h1><div class=CBody><p class=CParagraph>The purpose of this class is to embed a small javascript object on the loaded page, which other objects can place messages into.&nbsp; The mailman will collect the messages and deliver them to the reciever.&nbsp; The mailman is used when it is required to send data from unprivileged document to chrome.</p><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr><td class=SEntrySize><div class=SMain><div class=SEntry><a href="#MailMan" >MailMan</a></div></div></td><td class=SDescriptionSize><div class=SMain><div class=SDescription>The purpose of this class is to embed a small javascript object on the loaded page, which other objects can place messages into. </div></div></td></tr><tr><td><div class=SGroup><div class=SEntry><div class=SIndent1><a href="#MailMan.Functions" >Functions</a></div></div></div></td><td><div class=SGroup><div class=SDescription><div class=SIndent1></div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#MailMan.Mailman" >Mailman</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Initializes the Object</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#MailMan.addMailbox" id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">addMailbox</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>An easy way to send data from a web page to an extension is by using custom DOM events. </div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#MailMan.pickup" id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">pickup</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>When a page puts a message in the mailbox it generates an event that called &ldquo;pickup&rdquo;</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#MailMan.deliver_response" id=link3 onMouseOver="ShowTip(event, 'tt3', 'link3')" onMouseOut="HideTip('tt3')">deliver_response</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Alert Pmog of the returned response from a delivered message</div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#MailMan.authenticate_remote_request" id=link4 onMouseOver="ShowTip(event, 'tt4', 'link4')" onMouseOut="HideTip('tt4')">authenticate_remote_request</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Because of the way the extension talks to the loaded page it is possible for people to force the extension to run deploy actions, like sending messages etc. </div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#MailMan.generate_uri" id=link5 onMouseOver="ShowTip(event, 'tt5', 'link5')" onMouseOut="HideTip('tt5')">generate_uri</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Construct a valid uri as specificed by the PMOG server.</div></div></div></td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class=CGroup><div class=CTopic><h3 class=CTitle><a name="MailMan.Functions"></a>Functions</h3></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="MailMan.Mailman"></a>Mailman</h3><div class=CBody><p class=CParagraph>Initializes the Object</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="MailMan.addMailbox"></a>addMailbox</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>MailMan.prototype.addMailbox = function()</td></tr></table></blockquote><p class=CParagraph>An easy way to send data from a web page to an extension is by using custom DOM events.&nbsp; The mailbox is a custom DOM element added to the page after it loads.&nbsp; Data from the web page (unprivileged code) is stored in the mailbox&rsquo;s DOM element.&nbsp; The mailman periodically checks the mailbox looking for data to send back to the extension.</p><p class=CParagraph><b>Usage</b></p><p class=CParagraph>To dispatch an event back to the extension added something like this to the page.</p><blockquote><pre class=CCode>var element  = document.getElementById(&quot;pmog_mailbox&quot;);<br>var evt = document.createEvent(&quot;Events&quot;);<br>evt.initEvent(&quot;pickupMail&quot;, true, false);<br>element.dispatchEvent(evt);</pre></blockquote></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="MailMan.pickup"></a>pickup</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>MailMan.prototype.pickup = function(</td><td class=PParameter nowrap>evt</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>When a page puts a message in the mailbox it generates an event that called &ldquo;pickup&rdquo;</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>evt</td><td class=CDLDescription>DOM element which is the mailbox on the page.</td></tr></table></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="MailMan.deliver_response"></a>deliver_response</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>MailMan.prototype.deliver_response = function(</td><td class=PParameter nowrap>obj</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Alert Pmog of the returned response from a delivered message</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>obj</td><td class=CDLDescription>The response object from sent from the pmog server.</td></tr></table></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="MailMan.authenticate_remote_request"></a>authenticate_remote_request</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>MailMan.prototype.authenticate_remote_request = function(</td><td class=PParameter nowrap>id</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Because of the way the extension talks to the loaded page it is possible for people to force the extension to run deploy actions, like sending messages etc.&nbsp; However, now the application will only process this request if the window_id matches one of the page object&rsquo;s ids.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>id</td><td class=CDLDescription>The id to find in the page objects array.</td></tr></table><p class=CParagraph>Returns: True or False dependign if the id is found.</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="MailMan.generate_uri"></a>generate_uri</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>MailMan.prototype.generate_uri = function(</td><td class=PParameter nowrap>attributes,</td></tr><tr><td></td><td class=PParameter nowrap>options</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Construct a valid uri as specificed by the PMOG server.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>attributes</td><td class=CDLDescription>An object containing arguments, which will make up the query string appended to the url.&nbsp; In some cases the attributes will contain the url itself if the &ldquo;server_url&rdquo; property is provided.</td></tr><tr><td class=CDLEntry>options</td><td class=CDLDescription>An object containing attributes, which help define what type of request to make.</td></tr></table></div></div></div>


<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>MailMan.prototype.addMailbox = function()</td></tr></table></blockquote>An easy way to send data from a web page to an extension is by using custom DOM events. </div></div><div class=CToolTip id="tt2"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>MailMan.prototype.pickup = function(</td><td class=PParameter nowrap>evt</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>When a page puts a message in the mailbox it generates an event that called &ldquo;pickup&rdquo;</div></div><div class=CToolTip id="tt3"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>MailMan.prototype.deliver_response = function(</td><td class=PParameter nowrap>obj</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Alert Pmog of the returned response from a delivered message</div></div><div class=CToolTip id="tt4"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>MailMan.prototype.authenticate_remote_request = function(</td><td class=PParameter nowrap>id</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Because of the way the extension talks to the loaded page it is possible for people to force the extension to run deploy actions, like sending messages etc. </div></div><div class=CToolTip id="tt5"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>MailMan.prototype.generate_uri = function(</td><td class=PParameter nowrap>attributes,</td></tr><tr><td></td><td class=PParameter nowrap>options</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Construct a valid uri as specificed by the PMOG server.</div></div><!--END_ND_TOOLTIPS-->

<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>