<html><head><title>SQLiteConnector</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script language=JavaScript src="../javascript/main.js"></script></head><body class=FramedContentPage onLoad="NDOnLoad()"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.35 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->

<div class=CClass id=MainTopic><div class=CTopic><h1 class=CTitle><a name="SQLiteConnector"></a>SQLiteConnector</h1><div class=CBody><p class=CParagraph>An simple implementation of the Mozilla SQLite Storage API.</p><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr><td class=SEntrySize><div class=SMain><div class=SEntry><a href="#SQLiteConnector" >SQLiteConnector</a></div></div></td><td class=SDescriptionSize><div class=SMain><div class=SDescription>An simple implementation of the Mozilla SQLite Storage API.</div></div></td></tr><tr><td><div class=SGroup><div class=SEntry><div class=SIndent1><a href="#SQLiteConnector.Functions" >Functions</a></div></div></div></td><td><div class=SGroup><div class=SDescription><div class=SIndent1></div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.SQLiteConnector" id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">SQLiteConnector</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Initializes the Object</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.sqlite_version" id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">sqlite_version</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>This function just returns the sqlite version</div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.table_info" id=link3 onMouseOver="ShowTip(event, 'tt3', 'link3')" onMouseOut="HideTip('tt3')">table_info</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>This function returns the pragma info for a table Generates a query like this: PRAGMA table_info(`whitelists`)</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.invalidate_pragma_cache_for" id=link4 onMouseOver="ShowTip(event, 'tt4', 'link4')" onMouseOut="HideTip('tt4')">invalidate_pragma_cache_for</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>This function clears the stored pragma cache for the table provided.</div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.use" id=link5 onMouseOver="ShowTip(event, 'tt5', 'link5')" onMouseOut="HideTip('tt5')">use</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Use a specific database specified by db_name. </div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.execute" id=link6 onMouseOver="ShowTip(event, 'tt6', 'link6')" onMouseOut="HideTip('tt6')">execute</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Execute anything except a select statement on the database.</div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.select" id=link7 onMouseOver="ShowTip(event, 'tt7', 'link7')" onMouseOut="HideTip('tt7')">select</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Create a select statement to perform on the Database.</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.create_statement" id=link8 onMouseOver="ShowTip(event, 'tt8', 'link8')" onMouseOut="HideTip('tt8')">create_statement</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>This function creates a statement and the associated bind parameters for the query hash provided</div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.bind_parameter" id=link9 onMouseOver="ShowTip(event, 'tt9', 'link9')" onMouseOut="HideTip('tt9')">bind_parameter</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Create a bind parameter for a storage statement</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.new_transaction" id=link10 onMouseOver="ShowTip(event, 'tt10', 'link10')" onMouseOut="HideTip('tt10')">new_transaction</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Prepare the database by starting a transaction</div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.save_transaction" id=link11 onMouseOver="ShowTip(event, 'tt11', 'link11')" onMouseOut="HideTip('tt11')">save_transaction</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Commit the transaction for processing</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.collect_results" id=link12 onMouseOver="ShowTip(event, 'tt12', 'link12')" onMouseOut="HideTip('tt12')">collect_results</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>This function iterates over the returned results from the sql statement call and pushes the result into an array.</div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.find_records" id=link13 onMouseOver="ShowTip(event, 'tt13', 'link13')" onMouseOut="HideTip('tt13')">find_records</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Searches a table of the database for any records that meet the query parameters</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.find_record" id=link14 onMouseOver="ShowTip(event, 'tt14', 'link14')" onMouseOut="HideTip('tt14')">find_record</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Searches a table of the database for a particular record that matches the query parameters.</div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.create_record" id=link15 onMouseOver="ShowTip(event, 'tt15', 'link15')" onMouseOut="HideTip('tt15')">create_record</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Creates a new record for a particular table</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.update_records" id=link16 onMouseOver="ShowTip(event, 'tt16', 'link16')" onMouseOut="HideTip('tt16')">update_records</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Updates an existing record</div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.delete_records" id=link17 onMouseOver="ShowTip(event, 'tt17', 'link17')" onMouseOut="HideTip('tt17')">delete_records</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Delete an exiting record from the databse</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.query_fragment" id=link18 onMouseOver="ShowTip(event, 'tt18', 'link18')" onMouseOut="HideTip('tt18')">query_fragment</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Uses the options hash to create a query fragment used to create a complete sql statement.</div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.insert_fragment" id=link19 onMouseOver="ShowTip(event, 'tt19', 'link19')" onMouseOut="HideTip('tt19')">insert_fragment</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Creates an insert fragment used to create a database record</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.update_fragment" id=link20 onMouseOver="ShowTip(event, 'tt20', 'link20')" onMouseOut="HideTip('tt20')">update_fragment</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Creates an update fragment used to update a database record</div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.timestamp" id=link21 onMouseOver="ShowTip(event, 'tt21', 'link21')" onMouseOut="HideTip('tt21')">timestamp</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Automatically timestamp create and update operations if the table has fields named created_at/created_on or updated_at/updated_on.</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.create_table" id=link22 onMouseOver="ShowTip(event, 'tt22', 'link22')" onMouseOut="HideTip('tt22')">create_table</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Creates an SQLite table using the schema defined by the hash provided as a parameter</div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.create_column" id=link23 onMouseOver="ShowTip(event, 'tt23', 'link23')" onMouseOut="HideTip('tt23')">create_column</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Takes a column hash and returns the sql needed to create the column</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.map_column_type" id=link24 onMouseOver="ShowTip(event, 'tt24', 'link24')" onMouseOut="HideTip('tt24')">map_column_type</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Uses the column hash to choose the best sqlite column type.</div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.connect" id=link25 onMouseOver="ShowTip(event, 'tt25', 'link25')" onMouseOut="HideTip('tt25')">connect</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Open a database connection</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.disconnect" id=link26 onMouseOver="ShowTip(event, 'tt26', 'link26')" onMouseOut="HideTip('tt26')">disconnect</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Frees up the resources currently used for the database connection</div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.rollback" id=link27 onMouseOver="ShowTip(event, 'tt27', 'link27')" onMouseOut="HideTip('tt27')">rollback</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Rollback any transaction currently in progress</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.on_sql_error" id=link28 onMouseOver="ShowTip(event, 'tt28', 'link28')" onMouseOut="HideTip('tt28')">on_sql_error</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Report an error</div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.keys_to_sql" id=link29 onMouseOver="ShowTip(event, 'tt29', 'link29')" onMouseOut="HideTip('tt29')">keys_to_sql</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Format keys of a hash into a sql string</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.conditions_to_params" id=link30 onMouseOver="ShowTip(event, 'tt30', 'link30')" onMouseOut="HideTip('tt30')">conditions_to_params</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>A condition array typically looks like: [&lsquo;foo = ? </div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.conditions_to_binding_parameters" id=link31 onMouseOver="ShowTip(event, 'tt31', 'link31')" onMouseOut="HideTip('tt31')">conditions_to_binding_parameters</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>This function takes the conditions array and turns all instances of question marks in the first index into binding parameters supplied by the remaining indexes.</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.keys_to_binding_parameters" id=link32 onMouseOver="ShowTip(event, 'tt32', 'link32')" onMouseOut="HideTip('tt32')">keys_to_binding_parameters</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Format keys into binding parameters used by the Storage API to insert values into the SQL We use binding_parameters instead of just adding values manually to prevent SQL injection.</div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.back_quote" id=link33 onMouseOver="ShowTip(event, 'tt33', 'link33')" onMouseOut="HideTip('tt33')">back_quote</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Helper method to convert add back quotes to a string</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.double_quote" id=link34 onMouseOver="ShowTip(event, 'tt34', 'link34')" onMouseOut="HideTip('tt34')">double_quote</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Helper method to convert a string into a string enclosed in double quotes</div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.trim_last_comma" id=link35 onMouseOver="ShowTip(event, 'tt35', 'link35')" onMouseOut="HideTip('tt35')">trim_last_comma</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Helper method to remove the last comma and space of a string.</div></div></div></td></tr><tr><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.strip" id=link36 onMouseOver="ShowTip(event, 'tt36', 'link36')" onMouseOut="HideTip('tt36')">strip</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Function for removing extra white space off the beginning and end of a string From: <a href="http://blog.stevenlevithan.com/archives/faster-trim-javascript" class=LURL>http://blog.stevenlevithan.com<span class=HB>- </span>/archives<span class=HB>- </span>/faster-trim-javascript</a></div></div></div></td></tr><tr class=SMarked><td><div class=SFunction><div class=SEntry><div class=SIndent2><a href="#SQLiteConnector.is_array" id=link37 onMouseOver="ShowTip(event, 'tt37', 'link37')" onMouseOut="HideTip('tt37')">is_array</a></div></div></div></td><td><div class=SFunction><div class=SDescription><div class=SIndent2>Simple function that determines if an object is an array or not</div></div></div></td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class=CGroup><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.Functions"></a>Functions</h3></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.SQLiteConnector"></a>SQLiteConnector</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>function SQLiteConnector(</td><td class=PParameter nowrap>db_name</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Initializes the Object</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>db_name</td><td class=CDLDescription>The name of the database to find or create</td></tr></table></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.sqlite_version"></a>sqlite_version</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>SQLiteConnector.prototype.sqlite_version = function()</td></tr></table></blockquote><p class=CParagraph>This function just returns the sqlite version</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.table_info"></a>table_info</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.table_info = function(</td><td class=PParameter nowrap>table_name</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>This function returns the pragma info for a table Generates a query like this: PRAGMA table_info(`whitelists`)</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>table_name</td><td class=CDLDescription>Name of the table to query on</td></tr></table><h4 class=CHeading>Returns</h4><p class=CParagraph>An array of hashes containing attributes of the columns for the particular table.</p><h4 class=CHeading>Example Usage</h4><p class=CParagraph>Which returns an array like: [{&ldquo;cid&rdquo;:&rdquo;0&rdquo;,&rdquo;name&rdquo;:&rdquo;id&rdquo;,&rdquo;type&rdquo;:&rdquo;INTEGER&rdquo;,&rdquo;notnull&rdquo;:&rdquo;99&rdquo;,&rdquo;dflt_value&rdquo;:null,&rdquo;pk&rdquo;:&rdquo;1&rdquo;}, {&ldquo;cid&rdquo;:&rdquo;1&rdquo;,&rdquo;name&rdquo;:&rdquo;url&rdquo;,&rdquo;type&rdquo;:&rdquo;VARCHAR&rdquo;,&rdquo;notnull&rdquo;:&rdquo;0&rdquo;,&rdquo;dflt_value&rdquo;:&rdquo;NULL&rdquo;,&rdquo;pk&rdquo;:&rdquo;0&rdquo;}, {&ldquo;cid&rdquo;:&rdquo;2&rdquo;,&rdquo;name&rdquo;:&rdquo;created_at&rdquo;,&rdquo;type&rdquo;:&rdquo;DATETIME&rdquo;,&rdquo;notnull&rdquo;:&rdquo;0&rdquo;,&rdquo;dflt_value&rdquo;:&rdquo;NULL&rdquo;,&rdquo;pk&rdquo;:&rdquo;0&rdquo;}]</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.invalidate_pragma_cache_for"></a>invalidate_pragma_cache_for</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.invalidate_pragma_cache_for = function(</td><td class=PParameter nowrap>table_name</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>This function clears the stored pragma cache for the table provided.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>table_name</td><td class=CDLDescription>Name of the table to query on</td></tr></table><h4 class=CHeading>Returns</h4><p class=CParagraph>True or False depending if the cache could be invalidated.</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.use"></a>use</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.use = function(</td><td class=PParameter nowrap>db_name</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Use a specific database specified by db_name.&nbsp; If the database does not exist then it is created, though it will be empty.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>db_name</td><td class=CDLDescription>The database to use.</td></tr></table></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.execute"></a>execute</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.execute = function(</td><td class=PParameter nowrap>queries</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Execute anything except a select statement on the database.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>queries</td><td class=CDLDescription>an array of hashes representing the queries to execute.&nbsp; A query hash contains these keys</td></tr></table><blockquote><pre class=CCode>sql - SQL String<br>params - hash of extra parameters</pre></blockquote><p class=CParagraph>Returns either true or false.</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.select"></a>select</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.select = function(</td><td class=PParameter nowrap>query</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Create a select statement to perform on the Database.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>query</td><td class=CDLDescription>A hash representing the query and parameters to execute</td></tr></table><p class=CParagraph>Return: A 2D array of results if transaction succeeds</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.create_statement"></a>create_statement</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.create_statement = function(</td><td class=PParameter nowrap>query</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>This function creates a statement and the associated bind parameters for the query hash provided</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>query</td><td class=CDLDescription>Hash containing the query string and any parameters that are to be bound to the statement.&nbsp; A query hash contains these keys</td></tr></table><blockquote><pre class=CCode>sql - SQL String<br>params - hash of extra parameters</pre></blockquote><p class=CParagraph>Return: The instance of the Storage API Statement class.</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.bind_parameter"></a>bind_parameter</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.bind_parameter = function(</td><td class=PParameter nowrap>statement,</td></tr><tr><td></td><td class=PParameter nowrap>key,</td></tr><tr><td></td><td class=PParameter nowrap>value</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Create a bind parameter for a storage statement</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>statement</td><td class=CDLDescription>Instance of the Storage API Statment  object</td></tr><tr><td class=CDLEntry>key</td><td class=CDLDescription>string key to paramatize</td></tr><tr><td class=CDLEntry>value</td><td class=CDLDescription>Value to insert through bindings</td></tr></table></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.new_transaction"></a>new_transaction</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>SQLiteConnector.prototype.new_transaction = function()</td></tr></table></blockquote><p class=CParagraph>Prepare the database by starting a transaction</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.save_transaction"></a>save_transaction</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>SQLiteConnector.prototype.save_transaction = function()</td></tr></table></blockquote><p class=CParagraph>Commit the transaction for processing</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.collect_results"></a>collect_results</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.collect_results = function(</td><td class=PParameter nowrap>statement</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>This function iterates over the returned results from the sql statement call and pushes the result into an array.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>statement</td><td class=CDLDescription>statement containing results to process.</td></tr></table><p class=CParagraph>Returns: Array of results</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.find_records"></a>find_records</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.find_records = function(</td><td class=PParameter nowrap>table,</td></tr><tr><td></td><td class=PParameter nowrap>params</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Searches a table of the database for any records that meet the query parameters</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>table</td><td class=CDLDescription>Table to run the select query on</td></tr><tr><td class=CDLEntry>params</td><td class=CDLDescription>A hash of arguments that shape the sql call.&nbsp; Options are:</td></tr></table><blockquote><pre class=CCode>conditions - Array, where the first index is a sql fragment with or without questionmarks where<br>limit - Integer of the total number of records to return</pre></blockquote><p class=CParagraph>Returns: An array of hashes constituing the records retrieved from the database.</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.find_record"></a>find_record</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.find_record = function(</td><td class=PParameter nowrap>table,</td></tr><tr><td></td><td class=PParameter nowrap>options</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Searches a table of the database for a particular record that matches the query parameters.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>table</td><td class=CDLDescription>Table to run the select query on</td></tr><tr><td class=CDLEntry>options</td><td class=CDLDescription>A hash of arguments that shape the sql call.&nbsp; Options are:</td></tr></table><blockquote><pre class=CCode>conditions - Array, where the first index is a sql fragment with or without questionmarks where<br>limit - Integer of the total number of records to return</pre></blockquote><p class=CParagraph>Returns: An array of hashes constituing the records retrieved from the database.</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.create_record"></a>create_record</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.create_record = function(</td><td class=PParameter nowrap>table,</td></tr><tr><td></td><td class=PParameter nowrap>params</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Creates a new record for a particular table</p><p class=CParagraph>Parameters</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>table</td><td class=CDLDescription>The table to create the record on</td></tr><tr><td class=CDLEntry>params</td><td class=CDLDescription>Hash of key , value pairs to insert into the table.</td></tr></table></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.update_records"></a>update_records</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.update_records = function(</td><td class=PParameter nowrap>table,</td></tr><tr><td></td><td class=PParameter nowrap>params</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Updates an existing record</p><p class=CParagraph>Parameters</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>table</td><td class=CDLDescription>The table to create the record on</td></tr><tr><td class=CDLEntry>params</td><td class=CDLDescription>A hash of arguments that shape the sql call.&nbsp; Options are:</td></tr></table><blockquote><pre class=CCode>attributes - Attributes to apply to the record<br>conditions - Array, where the first index is a sql fragment with or without questionmarks where<br>limit - Integer of the total number of records to return</pre></blockquote></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.delete_records"></a>delete_records</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.delete_records = function(</td><td class=PParameter nowrap>table,</td></tr><tr><td></td><td class=PParameter nowrap>params</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Delete an exiting record from the databse</p><p class=CParagraph>Parameters table - The table to create the record on params - A hash of arguments that shape the sql call.&nbsp; Options are:</p><blockquote><pre class=CCode>conditions - Array, where the first index is a sql fragment with or without questionmarks where<br>limit - Integer of the total number of records to return</pre></blockquote></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.query_fragment"></a>query_fragment</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.query_fragment = function(</td><td class=PParameter nowrap>params</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Uses the options hash to create a query fragment used to create a complete sql statement.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>params</td><td class=CDLDescription>A hash of arguments that shape the sql call.&nbsp; Options are:</td></tr></table><blockquote><pre class=CCode>conditions - Array, where the first index is a sql fragment with or without questionmarks where<br>limit - Integer of the total number of records to return</pre></blockquote><p class=CParagraph>Returns: SQL fragment and params hash as a hash</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.insert_fragment"></a>insert_fragment</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.insert_fragment = function(</td><td class=PParameter nowrap>table,</td></tr><tr><td></td><td class=PParameter nowrap>params</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Creates an insert fragment used to create a database record</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>params</td><td class=CDLDescription>A hash of arguments that shape the sql call.&nbsp; Options are:</td></tr></table><blockquote><pre class=CCode>conditions - Array, where the first index is a sql fragment with or without questionmarks where<br>limit - Integer of the total number of records to return</pre></blockquote><p class=CParagraph>Returns: SQL fragment</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.update_fragment"></a>update_fragment</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.update_fragment = function(</td><td class=PParameter nowrap>table,</td></tr><tr><td></td><td class=PParameter nowrap>params</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Creates an update fragment used to update a database record</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>params</td><td class=CDLDescription>A hash of arguments that shape the sql call.&nbsp; Options are:</td></tr></table><blockquote><pre class=CCode>conditions - Array, where the first index is a sql fragment with or without questionmarks where<br>limit - Integer of the total number of records to return</pre></blockquote><p class=CParagraph>Returns: SQL fragment</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.timestamp"></a>timestamp</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.timestamp = function(</td><td class=PParameter nowrap>table,</td></tr><tr><td></td><td class=PParameter nowrap>attributes</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Automatically timestamp create and update operations if the table has fields named created_at/created_on or updated_at/updated_on.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>table</td><td class=CDLDescription>The table to create the record on</td></tr><tr><td class=CDLEntry>attributes</td><td class=CDLDescription>Hash of key , value pairs to insert into the table.</td></tr></table><p class=CParagraph>Returns: Attributes hash with dates applied if available.</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.create_table"></a>create_table</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.create_table = function(</td><td class=PParameter nowrap>schema,</td></tr><tr><td></td><td class=PParameter nowrap>options</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Creates an SQLite table using the schema defined by the hash provided as a parameter</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>schema</td><td class=CDLDescription>Hash of keys and key types for the table to be created</td></tr><tr><td class=CDLEntry>options</td><td class=CDLDescription>Additional options for the table creation process.&nbsp; The supported options are:</td></tr><tr><td class=CDLEntry>force : boolen</td><td class=CDLDescription>It will drop the existing table (if found) before creating it.</td></tr></table><h4 class=CHeading>Example Usage</h4><ul class=CBulletList><li>posts = { title : &lsquo;string&rsquo;, published_on: &lsquo;datetime&rsquo;, allow_comments : &lsquo;boolean&rsquo; }</li><li>options = { force : true }</li><li>create_table(posts, options)</li></ul></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.create_column"></a>create_column</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.create_column = function(</td><td class=PParameter nowrap>column</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Takes a column hash and returns the sql needed to create the column</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>column</td><td class=CDLDescription>hash with attributes corresponding to the sql column to be created.</td></tr></table><p class=CParagraph>Returns: string</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.map_column_type"></a>map_column_type</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.map_column_type = function(</td><td class=PParameter nowrap>column</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Uses the column hash to choose the best sqlite column type.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>column</td><td class=CDLDescription>Hash containing the column type</td></tr></table><p class=CParagraph>Returns: the correct column type or nothing</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.connect"></a>connect</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.connect = function(</td><td class=PParameter nowrap>db</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Open a database connection</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>db</td><td class=CDLDescription>An instance of the Mozilla directory service, which is the database to connect to.</td></tr></table><p class=CParagraph>Returns: Boolean</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.disconnect"></a>disconnect</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>SQLiteConnector.prototype.disconnect = function()</td></tr></table></blockquote><p class=CParagraph>Frees up the resources currently used for the database connection</p><p class=CParagraph>Returns: Boolean</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.rollback"></a>rollback</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>SQLiteConnector.prototype.rollback = function()</td></tr></table></blockquote><p class=CParagraph>Rollback any transaction currently in progress</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.on_sql_error"></a>on_sql_error</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.on_sql_error = function(</td><td class=PParameter nowrap>e,</td></tr><tr><td></td><td class=PParameter nowrap>statement,</td></tr><tr><td></td><td class=PParameter nowrap>sql_message</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Report an error</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>e</td><td class=CDLDescription>the exception object for the error that occurred</td></tr><tr><td class=CDLEntry>statement</td><td class=CDLDescription>annotation for this exception provided by the programmer</td></tr><tr><td class=CDLEntry>sql_message</td><td class=CDLDescription>sql specific error message (optional)</td></tr></table><p class=CParagraph>Returns: Boolean</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.keys_to_sql"></a>keys_to_sql</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.keys_to_sql = function(</td><td class=PParameter nowrap>attributes</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Format keys of a hash into a sql string</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>attributes</td><td class=CDLDescription>hash containing attributes to format into SQL string</td></tr></table><p class=CParagraph>Return: Array of formatted SQL keys</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.conditions_to_params"></a>conditions_to_params</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.conditions_to_params = function(</td><td class=PParameter nowrap>conditions</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>A condition array typically looks like: [&lsquo;foo = ? AND baz = ?&rsquo;,&rsquo;bar&rsquo;,&rsquo;baz&rsquo;].&nbsp; The binding params (bar and baz) need to be mapped to the binding variables which replace the question marks.&nbsp; This method returns a hash with the keys mapped to the binding params for example: this.conditions_to_params([&lsquo;foo = ? AND baz = ?&rsquo;,&rsquo;bar&rsquo;,&rsquo;baz&rsquo;].splice(0, 1)); { binding_0 : &lsquo;bar&rsquo;, binding_1 : &lsquo;baz&rsquo; }</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>conditions</td><td class=CDLDescription>An array of variables that are to be bound to the conditions statement during the select statement</td></tr></table><p class=CParagraph>Returns: A hash</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.conditions_to_binding_parameters"></a>conditions_to_binding_parameters</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters colspan=2>SQLiteConnector.prototype.conditions_to_binding_parameters = function(</td></tr><tr><td>&nbsp;&nbsp;&nbsp;</td><td class=PParameter nowrap width=100%>conditions</td></tr><tr><td class=PAfterParameters colspan=2>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>This function takes the conditions array and turns all instances of question marks in the first index into binding parameters supplied by the remaining indexes.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>conditions</td><td class=CDLDescription>Array, where the first index is a sql fragment with or without questionmarks where binding parameters should go.</td></tr></table><p class=CParagraph>Returns: A String with the questionmarks replaced with binding variables.</p><h4 class=CHeading>Example</h4><ul class=CBulletList><li>this.conditions_to_binding_parameters([&ldquo;foo = ? AND baz = ?&rdquo;, &lsquo;bar&rsquo;, 1]) becomes &ldquo;foo = :binding_0 AND baz = :binding_1&rdquo;</li><li>this.conditions_to_binding_parameters([&ldquo;foo = &lsquo;bar&rsquo;&rdquo;]) becomes &ldquo;foo = &lsquo;bar&rsquo;&rdquo;</li><li>this.conditions_to_binding_parameters(&ldquo;foo = &lsquo;bar&rsquo;&rdquo;) becomes &ldquo;foo = &lsquo;bar&rsquo;&rdquo;</li></ul></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.keys_to_binding_parameters"></a>keys_to_binding_parameters</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.keys_to_binding_parameters = function(</td><td class=PParameter nowrap>attributes</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Format keys into binding parameters used by the Storage API to insert values into the SQL We use binding_parameters instead of just adding values manually to prevent SQL injection.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>attributes</td><td class=CDLDescription>hash containing keys to format into binding parameters</td></tr></table><p class=CParagraph>Returns: An array for formated keys</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.back_quote"></a>back_quote</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.back_quote = function(</td><td class=PParameter nowrap>str</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Helper method to convert add back quotes to a string</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>str</td><td class=CDLDescription>String to return inside back quotes</td></tr></table></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.double_quote"></a>double_quote</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.double_quote = function(</td><td class=PParameter nowrap>str</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Helper method to convert a string into a string enclosed in double quotes</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>str</td><td class=CDLDescription>String to return inside double quotes</td></tr></table></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.trim_last_comma"></a>trim_last_comma</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.trim_last_comma = function(</td><td class=PParameter nowrap>str</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Helper method to remove the last comma and space of a string.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>str</td><td class=CDLDescription>string to remove the last comment from</td></tr></table><h4 class=CHeading>Example</h4><p class=CParagraph>&rdquo;foo, bar, baz, &ldquo; becomes &ldquo;foo, bar, baz&rdquo;</p></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.strip"></a>strip</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.strip = function(</td><td class=PParameter nowrap>str</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Function for removing extra white space off the beginning and end of a string From: <a href="http://blog.stevenlevithan.com/archives/faster-trim-javascript" class=LURL>http://blog.stevenlevithan.com<span class=HB>- </span>/archives<span class=HB>- </span>/faster-trim-javascript</a></p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>str</td><td class=CDLDescription>String to format</td></tr></table></div></div></div>

<div class=CFunction><div class=CTopic><h3 class=CTitle><a name="SQLiteConnector.is_array"></a>is_array</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.is_array = function(</td><td class=PParameter nowrap>arr</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote><p class=CParagraph>Simple function that determines if an object is an array or not</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>arr</td><td class=CDLDescription>Object to analyze</td></tr></table></div></div></div>


<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>function SQLiteConnector(</td><td class=PParameter nowrap>db_name</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Initializes the Object</div></div><div class=CToolTip id="tt2"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>SQLiteConnector.prototype.sqlite_version = function()</td></tr></table></blockquote>This function just returns the sqlite version</div></div><div class=CToolTip id="tt3"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.table_info = function(</td><td class=PParameter nowrap>table_name</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>This function returns the pragma info for a table Generates a query like this: PRAGMA table_info(`whitelists`)</div></div><div class=CToolTip id="tt4"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.invalidate_pragma_cache_for = function(</td><td class=PParameter nowrap>table_name</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>This function clears the stored pragma cache for the table provided.</div></div><div class=CToolTip id="tt5"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.use = function(</td><td class=PParameter nowrap>db_name</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Use a specific database specified by db_name. </div></div><div class=CToolTip id="tt6"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.execute = function(</td><td class=PParameter nowrap>queries</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Execute anything except a select statement on the database.</div></div><div class=CToolTip id="tt7"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.select = function(</td><td class=PParameter nowrap>query</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Create a select statement to perform on the Database.</div></div><div class=CToolTip id="tt8"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.create_statement = function(</td><td class=PParameter nowrap>query</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>This function creates a statement and the associated bind parameters for the query hash provided</div></div><div class=CToolTip id="tt9"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.bind_parameter = function(</td><td class=PParameter nowrap>statement,</td></tr><tr><td></td><td class=PParameter nowrap>key,</td></tr><tr><td></td><td class=PParameter nowrap>value</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Create a bind parameter for a storage statement</div></div><div class=CToolTip id="tt10"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>SQLiteConnector.prototype.new_transaction = function()</td></tr></table></blockquote>Prepare the database by starting a transaction</div></div><div class=CToolTip id="tt11"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>SQLiteConnector.prototype.save_transaction = function()</td></tr></table></blockquote>Commit the transaction for processing</div></div><div class=CToolTip id="tt12"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.collect_results = function(</td><td class=PParameter nowrap>statement</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>This function iterates over the returned results from the sql statement call and pushes the result into an array.</div></div><div class=CToolTip id="tt13"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.find_records = function(</td><td class=PParameter nowrap>table,</td></tr><tr><td></td><td class=PParameter nowrap>params</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Searches a table of the database for any records that meet the query parameters</div></div><div class=CToolTip id="tt14"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.find_record = function(</td><td class=PParameter nowrap>table,</td></tr><tr><td></td><td class=PParameter nowrap>options</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Searches a table of the database for a particular record that matches the query parameters.</div></div><div class=CToolTip id="tt15"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.create_record = function(</td><td class=PParameter nowrap>table,</td></tr><tr><td></td><td class=PParameter nowrap>params</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Creates a new record for a particular table</div></div><div class=CToolTip id="tt16"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.update_records = function(</td><td class=PParameter nowrap>table,</td></tr><tr><td></td><td class=PParameter nowrap>params</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Updates an existing record</div></div><div class=CToolTip id="tt17"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.delete_records = function(</td><td class=PParameter nowrap>table,</td></tr><tr><td></td><td class=PParameter nowrap>params</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Delete an exiting record from the databse</div></div><div class=CToolTip id="tt18"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.query_fragment = function(</td><td class=PParameter nowrap>params</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Uses the options hash to create a query fragment used to create a complete sql statement.</div></div><div class=CToolTip id="tt19"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.insert_fragment = function(</td><td class=PParameter nowrap>table,</td></tr><tr><td></td><td class=PParameter nowrap>params</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Creates an insert fragment used to create a database record</div></div><div class=CToolTip id="tt20"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.update_fragment = function(</td><td class=PParameter nowrap>table,</td></tr><tr><td></td><td class=PParameter nowrap>params</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Creates an update fragment used to update a database record</div></div><div class=CToolTip id="tt21"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.timestamp = function(</td><td class=PParameter nowrap>table,</td></tr><tr><td></td><td class=PParameter nowrap>attributes</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Automatically timestamp create and update operations if the table has fields named created_at/created_on or updated_at/updated_on.</div></div><div class=CToolTip id="tt22"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.create_table = function(</td><td class=PParameter nowrap>schema,</td></tr><tr><td></td><td class=PParameter nowrap>options</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Creates an SQLite table using the schema defined by the hash provided as a parameter</div></div><div class=CToolTip id="tt23"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.create_column = function(</td><td class=PParameter nowrap>column</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Takes a column hash and returns the sql needed to create the column</div></div><div class=CToolTip id="tt24"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.map_column_type = function(</td><td class=PParameter nowrap>column</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Uses the column hash to choose the best sqlite column type.</div></div><div class=CToolTip id="tt25"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.connect = function(</td><td class=PParameter nowrap>db</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Open a database connection</div></div><div class=CToolTip id="tt26"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>SQLiteConnector.prototype.disconnect = function()</td></tr></table></blockquote>Frees up the resources currently used for the database connection</div></div><div class=CToolTip id="tt27"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>SQLiteConnector.prototype.rollback = function()</td></tr></table></blockquote>Rollback any transaction currently in progress</div></div><div class=CToolTip id="tt28"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.on_sql_error = function(</td><td class=PParameter nowrap>e,</td></tr><tr><td></td><td class=PParameter nowrap>statement,</td></tr><tr><td></td><td class=PParameter nowrap>sql_message</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Report an error</div></div><div class=CToolTip id="tt29"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.keys_to_sql = function(</td><td class=PParameter nowrap>attributes</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Format keys of a hash into a sql string</div></div><div class=CToolTip id="tt30"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.conditions_to_params = function(</td><td class=PParameter nowrap>conditions</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>A condition array typically looks like: [&lsquo;foo = ? </div></div><div class=CToolTip id="tt31"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters colspan=2>SQLiteConnector.prototype.conditions_to_binding_parameters = function(</td></tr><tr><td>&nbsp;&nbsp;&nbsp;</td><td class=PParameter nowrap width=100%>conditions</td></tr><tr><td class=PAfterParameters colspan=2>)</td></tr></table></td></tr></table></blockquote>This function takes the conditions array and turns all instances of question marks in the first index into binding parameters supplied by the remaining indexes.</div></div><div class=CToolTip id="tt32"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.keys_to_binding_parameters = function(</td><td class=PParameter nowrap>attributes</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Format keys into binding parameters used by the Storage API to insert values into the SQL We use binding_parameters instead of just adding values manually to prevent SQL injection.</div></div><div class=CToolTip id="tt33"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.back_quote = function(</td><td class=PParameter nowrap>str</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Helper method to convert add back quotes to a string</div></div><div class=CToolTip id="tt34"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.double_quote = function(</td><td class=PParameter nowrap>str</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Helper method to convert a string into a string enclosed in double quotes</div></div><div class=CToolTip id="tt35"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.trim_last_comma = function(</td><td class=PParameter nowrap>str</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Helper method to remove the last comma and space of a string.</div></div><div class=CToolTip id="tt36"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.strip = function(</td><td class=PParameter nowrap>str</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Function for removing extra white space off the beginning and end of a string From: http://blog.stevenlevithan.com/archives/faster-trim-javascript</div></div><div class=CToolTip id="tt37"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>SQLiteConnector.prototype.is_array = function(</td><td class=PParameter nowrap>arr</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Simple function that determines if an object is an array or not</div></div><!--END_ND_TOOLTIPS-->

<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>